{"data":{"site":{"siteMetadata":{"title":"Johnny Zhu","author":"Johnny Zhu"}},"markdownRemark":{"id":"9b2bf316-d642-5380-902f-0e06e42dab54","excerpt":"\n","html":"  <script>\n\n    var myCredentials = new AWS.CognitoIdentityCredentials({IdentityPoolId:'us-west-2_jV4C12bpf'});\n    var myConfig = new AWS.Config({\n      credentials: myCredentials, region: 'us-west-2'\n    });\n\n    AWS.config.update({\n      region: \"us-west-2\",\n      endpoint: 'https://dynamodb.us-west-2.amazonaws.com',\n      // accessKeyId default can be used while using the downloadable version of DynamoDB. \n      // For security reasons, do not store AWS Credentials in your files. Use Amazon Cognito instead.\n      accessKeyId: \"AKIAJ2HAZJ7TQ3V4FM2Q\",\n      // // secretAccessKey default can be used while using the downloadable version of DynamoDB. \n      // // For security reasons, do not store AWS Credentials in your files. Use Amazon Cognito instead.\n      secretAccessKey: \"GoBN++Wg7hd0Yqk+RkPzLk0fWph3xKANDUwRMutD\"\n    });\n\n    var docClient = new AWS.DynamoDB.DocumentClient();\n    var dateArray = [];\n    var timeArray = [];\n    var epochArray = [];\n\n    function queryData() {\n        // document.getElementById('textarea').innerHTML += \"Querying for movies from 1985: \";\n\n        var params = {\n            TableName : \"wake_up\",\n            KeyConditionExpression: \"hello_world = :world\",\n            ExpressionAttributeValues: {\n                \":world\":\"hello\"\n            }\n        };\n\n        docClient.query(params, function(err, data) {\n            \n          for (var i = 0; i < data.Items.length; i++) {\n              var myDate = (new Date(data.Items[i].date_time * 1)).toString().split(\" \"); \n              dateArray[i] = myDate[1] + \" \" + myDate[2] + \" \" + myDate[3];\n              var myTime = myDate[4].split(\":\");\n              timeArray[i] = myTime[0] * 3600 + myTime[1] * 60 + myTime[2] / 1;\n          }\n\n          var ctx = document.getElementById(\"myChart\");\n          var myChart = new Chart(ctx, {\n              type: 'line',\n              data: {\n                labels: dateArray,\n                datasets: [\n                    {\n                        label: \"\",\n                        fill: false,\n                        lineTension: 0.1,\n                        backgroundColor: \"rgba(75,192,192,0.4)\",\n                        borderColor: \"rgba(75,192,192,1)\",\n                        borderCapStyle: 'butt',\n                        borderDash: [],\n                        borderDashOffset: 0.0,\n                        borderJoinStyle: 'miter',\n                        pointBorderColor: \"rgba(75,192,192,1)\",\n                        pointBackgroundColor: \"#fff\",\n                        pointBorderWidth: 3,\n                        pointHoverRadius: 5,\n                        pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n                        pointHoverBorderColor: \"rgba(220,220,220,1)\",\n                        pointHoverBorderWidth: 2,\n                        pointRadius: 3,\n                        pointHitRadius: 10,\n                        data: timeArray,\n                        spanGaps: false,\n                    }\n                ]\n              },\n              options: {\n                  title: {\n                    display: true,\n                    text: 'Every morning I push this AWS IoT button and it logs it on this graph!',\n                    fontSize: 16\n                  },\n                  scales: {\n                      yAxes: [{\n                          ticks: {\n                              callback: function(v) { return epoch_to_hh_mm_ss(v) },\n                          }\n                      }]\n                  },\n                  tooltips: {\n                    callbacks: {\n                      label: function(tooltipItem, data) {\n                        return data.datasets[tooltipItem.datasetIndex].label + ': ' + epoch_to_hh_mm_ss(tooltipItem.yLabel)\n                      }\n                    }\n                  },\n                  legend: {\n                    display: false\n                  }\n              }\n          });\n\n            function epoch_to_hh_mm_ss(d) {\n              d = Number(d);\n              var h = Math.floor(d / 3600);\n              var m = Math.floor(d % 3600 / 60);\n              var s = Math.floor(d % 3600 % 60);\n              return ((h > 0 ? h + \":\" + (m < 10 ? \"0\" : \"\") : \"\") + m + \":\" + (s < 10 ? \"0\" : \"\") + s);\n            }\n\n        });\n    }\n    queryData();\n  </script>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b0af62ad424a3a18d16de1a52667b19b/2ef9e/wakeup-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 250px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBAUC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAHrxjzs9NUmrfI6Qb//xAAbEAABBAMAAAAAAAAAAAAAAAABAAIDEBEhIv/aAAgBAQABBQJZqYOKj0Wjm//EABYRAAMAAAAAAAAAAAAAAAAAABEgIf/aAAgBAwEBPwE1P//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/ASP/xAAbEAACAQUAAAAAAAAAAAAAAAAAAREDEBIgQf/aAAgBAQAGPwK76PKnIp0//8QAGRABAQEBAQEAAAAAAAAAAAAAAQAhERBR/9oACAEBAAE/Ieyft2G4wubBzBMnAWzcPP/aAAwDAQACAAMAAAAQnzAD/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREg/9oACAEDAQE/EFETH//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPxACW4//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMVFhcYGR/9oACAEBAAE/EPKAxX7KsKbiIEUcVpiEtAMYfcsoAzCOydU1P//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wakeup-1\"\n        title=\"\"\n        src=\"/static/b0af62ad424a3a18d16de1a52667b19b/56b6a/wakeup-1.jpg\"\n        srcset=\"/static/b0af62ad424a3a18d16de1a52667b19b/b33b9/wakeup-1.jpg 63w,\n/static/b0af62ad424a3a18d16de1a52667b19b/d7dd0/wakeup-1.jpg 125w,\n/static/b0af62ad424a3a18d16de1a52667b19b/56b6a/wakeup-1.jpg 250w,\n/static/b0af62ad424a3a18d16de1a52667b19b/66035/wakeup-1.jpg 375w,\n/static/b0af62ad424a3a18d16de1a52667b19b/9e7f9/wakeup-1.jpg 500w,\n/static/b0af62ad424a3a18d16de1a52667b19b/6bb96/wakeup-1.jpg 750w,\n/static/b0af62ad424a3a18d16de1a52667b19b/2ef9e/wakeup-1.jpg 3024w\"\n        sizes=\"(max-width: 250px) 100vw, 250px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8bcf9748e7612835bfe2ba2f71832e11/2ef9e/wakeup-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 250px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAL/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxWroh2XWEuFf/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIAAxESEyEi/9oACAEBAAEFAmVrIoKjaBLADukXDB/Qo6nEhn//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BI//EACAQAAIBAQkAAAAAAAAAAAAAAAABESIQEiExMlFhkbH/2gAIAQEABj8Cn0h2XnSuSpStyTEzZp6P/8QAHhAAAwACAQUAAAAAAAAAAAAAAAERITFRQWFxkdH/2gAIAQEAAT8hb7eWFJlnBBMD5fgkvZJhhm7CRs6JN6G9cPQ//9oADAMBAAIAAwAAABDvz8H/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQMBAT8QZ3//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPxAh/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITGBQVFxkaH/2gAIAQEAAT8QKtQ3ymEw4Lgo1/Jrwi7jl7QBF8qd+u48oF1DTyTbj6lrRA9EXMN8JH0T/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"wakeup-2\"\n        title=\"\"\n        src=\"/static/8bcf9748e7612835bfe2ba2f71832e11/56b6a/wakeup-2.jpg\"\n        srcset=\"/static/8bcf9748e7612835bfe2ba2f71832e11/b33b9/wakeup-2.jpg 63w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/d7dd0/wakeup-2.jpg 125w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/56b6a/wakeup-2.jpg 250w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/66035/wakeup-2.jpg 375w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/9e7f9/wakeup-2.jpg 500w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/6bb96/wakeup-2.jpg 750w,\n/static/8bcf9748e7612835bfe2ba2f71832e11/2ef9e/wakeup-2.jpg 3024w\"\n        sizes=\"(max-width: 250px) 100vw, 250px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>","frontmatter":{"title":"AWS IoT Button","date":"April 18, 2017"}}},"pageContext":{"slug":"/aws-iot-button/","previous":{"fields":{"slug":"/wheres-my-widget/"},"frontmatter":{"title":"Visualizing World Bank Logistics Data"}},"next":{"fields":{"slug":"/eventright/"},"frontmatter":{"title":"Eventright"}}}}